<!DOCTYPE html>
<html class="">
  <head>
    <meta charset="UTF-8">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="Personal portfolio powered by Jekyll and GitHub Pages ">
    <meta rel="author" href="https://plus.google.com/u/0/#">
    <meta rel="publisher" href="https://plus.google.com/u/0/#">
    <title>
      
        Graybar: Optimizing Hadoop Ingests | Nick Hunkins
      
    </title>
    <link rel="stylesheet" href="/assets/css/all.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
    <link href="https://fonts.googleapis.com/css?family=Roboto" rel="stylesheet">
    <!--[if lt IE 9]><script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
    <!-- Use Atom -->
    <link type="application/atom+xml" rel="alternate" href="http://localhost:4000/feed.xml" title="Nick Hunkins" />
    <script type="text/javascript" async
      src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML">
    </script>
    
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-112060364-3', 'auto');
  ga('send', 'pageview');
</script>


    <!-- Use Jekyll SEO plugin -->
    <!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Graybar: Optimizing Hadoop Ingests | Nick Hunkins</title>
<meta name="generator" content="Jekyll v4.3.3" />
<meta property="og:title" content="Graybar: Optimizing Hadoop Ingests" />
<meta name="author" content="Nick Hunkins" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Nick Hunkins’ personal website - Powered by Jekyll and GitHub Pages" />
<meta property="og:description" content="Nick Hunkins’ personal website - Powered by Jekyll and GitHub Pages" />
<link rel="canonical" href="http://localhost:4000/parallel-sap-ingests" />
<meta property="og:url" content="http://localhost:4000/parallel-sap-ingests" />
<meta property="og:site_name" content="Nick Hunkins" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2024-04-02T00:00:00-06:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Graybar: Optimizing Hadoop Ingests" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Nick Hunkins"},"dateModified":"2024-04-02T00:00:00-06:00","datePublished":"2024-04-02T00:00:00-06:00","description":"Nick Hunkins’ personal website - Powered by Jekyll and GitHub Pages","headline":"Graybar: Optimizing Hadoop Ingests","mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/parallel-sap-ingests"},"url":"http://localhost:4000/parallel-sap-ingests"}</script>
<!-- End Jekyll SEO tag -->

  </head>
  <body>
    <div class="site-container">
      <header>
  <div class="logo" style="width:250px;">
    <a href="/">Nick Hunkins</a>
  </div>
  <nav>
    
      <a href="/">Home</a>
    
      <a href="/blog">Blog</a>
    
      <a href="/about">About</a>
    
      <a href="/contact">Contact</a>
    
  </nav>
  <hr>
</header>

      <section>
  <div class="post-container">
    <h4 class="project-title">Graybar: Optimizing Hadoop Ingests</h4>
    <div class="project-load"><hr />

<h4 id="the-need-for-data">The Need For Data</h4>
<p>In my professional experience working as a Sr Advanced Analytics Developer at Graybar Electric, I worked in a variety of roles. Sometimes I would focus on software development and my days were spent writing Python and SQL. At other times I would concentrate on developing data visualization tools in Qlik for the consumption of business users external to our team.</p>

<p>Regardless of the task I was working on, one thing was always the same: the need for up-to-date, reliable data.</p>

<p>Our team leveraged an on-prem Hadoop cluster to store and analyze the vast quantities of data produced by the day-to-day business. After about a year of working on the team, I began transitioning into a data engineering role and learned more about Hadoop and the braoder concept of distributed computing.</p>

<h5 id="the-shift-to-data-engineering">The Shift to Data Engineering</h5>
<p>What prompted my shift into a data engineering role was the emergence of a new and serious problem: the process to update the team data lake each day was severely outdated and was no longer trustworthy.</p>

<p>The troubled process was written at a time when the team required just 24 data tables to conduct all of their work. By this time in the teams lifespan, we needed over 150 tables to be up-to-date each morning we came into work, and that number was only growing. It was time for an upgrade.</p>

<h4 id="the-problem">The Problem</h4>

<p>The old data ingestion process had three major issues: speed, visibility, and reliability. A new process would have to address and improve each of these three parts.</p>

<h5 id="speed">Speed</h5>
<p>From start to finish, it took about 22 hours for the old process to perform a complete update on all of our data tables. If the team was expected to work 8 hours a day, they should expect to have reliable data for at least that duration. The most they could hope for at this juncture was for 2 hours of stable data. It goes without saying that this status quo was beyond unacceptable.</p>

<h5 id="visibility">Visibility</h5>
<p>When a data table ingestion failed, it failed silently. The only way to learn of a failed update was to either look into the endless log files or to stumble upon an error while browsing data that one thought was up-to-date. Of course, outdated data can be hard to detect for end users, especially when relying on downstream data that has already been manipulated in some way, and even more so when there is an <i>expection</i> that the data has been updated.</p>

<h5 id="reliability">Reliability</h5>
<p>Finally, when a table ingest did fail (something that happened all too often), there was no automated process to handle that failure. It just failed and moved on to the next table as if nothing had happened. That meant that any tables that failed during a given ingest had to be manually updated if they were to be used that day. This produced a lot of unnecessary extra work for the team, and it distracted us all from more important and valuable work.</p>

<h4 id="the-solution">The Solution</h4>

<p>A teammate and I sat down together one day and began combing through the code that made up the old process. After a few days of brainstorming and testing ideas, we came up with a solution. It would be a completely new process built on five ideas:</p>

<ol>
    <li>Parallel Processing</li>
    <li>Deltas</li>
    <li>Priority Queue</li>
    <li>Email Notifications</li>
    <li>Automatic Retries</li>
</ol>

<h5 id="parallel-processing">Parallel Processing</h5>

<h5 id="deltas">Deltas</h5>

<h5 id="priority-queue">Priority Queue</h5>

<h5 id="email-notification">Email Notification</h5>

<h5 id="automatic-retry">Automatic Retry</h5>

<h4 id="results">Results</h4>

<p>Myself and a fellow team member rewrote the ingest process from the bottom up. We used parallel processing to ingest smaller tables in parallel, and for large tables implemented a delta process where only records that had been changed or added were ingested rather than the entire data source.</p>

<p>This drastically reduced the time taken for daily data ingestion from 22 hours to around 7 hours. With this improvement, the team was able to build new dashboards in Qlik that could provide other teams within the business up-to-date information to assist their needs.</p>
</div>
  </div>
  
</section>

      <footer>
  <div class="footer-wrap">
    <div class="footer-tagline">
      <p></p>
    </div>
    <div class="social-media">
      <nav>
        
          <a href="https://instagram.com/nick.hunkins" target="_blank"><i class="fa fa-instagram" aria-hidden="true"></i></a>
        
          <a href="https://github.com/nchp89" target="_blank"><i class="fa fa-github" aria-hidden="true"></i></a>
        
          <a href="https://linkedin.com/in/nick-hunkins" target="_blank"><i class="fa fa-linkedin" aria-hidden="true"></i></a>
        
          <a href="mailto:nickhunkins@gmail.com" target="_blank"><i class="fa fa-envelope" aria-hidden="true"></i></a>
        
      </nav>
    </div>
  </div>
</footer>

    </div>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
  </body>
</html>
